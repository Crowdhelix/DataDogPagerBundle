{% set func = "search_filter_" ~ key | replace({".": "_"}) %}
<input type="text"
       class="form-control input-sm"
       value="{{ value }}"
       data-link="{{ filter_uri(pagination, key, "_search_pattern_") }}"
       onkeypress="this.onchange();"
       onpaste="this.onchange();"
       oninput="this.onchange();"
       onchange="{{ func }}(this);"/>

<script>
(function(wnd, doc) {
  var timeout;
  wnd.{{ func }} = function(inp) {
    timeout && wnd.clearTimeout(timeout)
    timeout = wnd.setTimeout(function() {
      doc.location.href = inp.getAttribute('data-link').replace("_search_pattern_", inp.value);
    }, 1500); // 1.5 seconds
  }
}(window, document));
</script>
